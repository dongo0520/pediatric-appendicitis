<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIê¸°ë°˜ ì¶©ìˆ˜ì—¼ ìê°€ì§„ë‹¨ ì„¤ë¬¸ì§€(í•­ì†Œë‹´ì™¸ê³¼-ì†Œì•„ìš©:12ì„¸ì´í•˜)</title>
    <style>
        body { 
            font-family: 'êµ´ë¦¼', 'Gulim', Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: linear-gradient(135deg, #ffeaa7, #fab1a0, #fd79a8);
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(45deg, #6c5ce7, #fd79a8);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: relative;
        }
        .header::before {
            content: 'ğŸ¥';
            font-size: 40px;
            position: absolute;
            top: 10px;
            left: 20px;
        }
        .header::after {
            content: 'ğŸ©º';
            font-size: 40px;
            position: absolute;
            top: 10px;
            right: 20px;
        }
        h1 { 
            margin: 0;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .content {
            padding: 30px;
        }
        .important { 
            background: #ffe6e6;
            border: 2px solid #ff7675;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            font-weight: bold;
            text-align: center;
            position: relative;
        }
        .important::before {
            content: 'âš ï¸';
            font-size: 24px;
            margin-right: 10px;
        }
        .section { 
            background: #f8f9ff;
            margin: 20px 0;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #6c5ce7;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #6c5ce7;
            margin-top: 0;
            font-size: 20px;
            display: flex;
            align-items: center;
        }
        .section h2::before {
            font-size: 24px;
            margin-right: 10px;
        }
        .basic-info h2::before { content: 'ğŸ‘¶'; }
        .symptoms h2::before { content: 'ğŸ¤’'; }
        .duration h2::before { content: 'â°'; }
        .pain h2::before { content: 'ğŸ˜£'; }
        .tests h2::before { content: 'ğŸ”¬'; }
        
        label { 
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        label:hover {
            background: #e8f4fd;
            border-color: #74b9ff;
            transform: translateX(5px);
        }
        input[type="checkbox"], input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        input[type="number"], select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            margin-left: 10px;
        }
        .pain-slider {
            margin: 20px 0;
            text-align: center;
        }
        .pain-scale {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(to right, #00b894, #fdcb6e, #e17055);
            outline: none;
            margin: 10px 0;
        }
        .pain-faces {
            display: flex;
            justify-content: space-between;
            font-size: 24px;
            margin: 10px 0;
        }
        .submit-btn {
            background: linear-gradient(45deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        .result {
            background: #f1f2f6;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #ddd;
        }
        .result h2 {
            color: #2d3436;
            margin-top: 0;
        }
        .diagnosis-item {
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .diagnosis-1 { border-left-color: #e17055; }
        .diagnosis-2 { border-left-color: #fdcb6e; }
        .diagnosis-3 { border-left-color: #74b9ff; }
        .high-risk {
            background: #fee;
            border: 2px solid #e17055;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            color: #c0392b;
        }
        .urgency-indicator {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            color: white;
            font-size: 12px;
            margin-left: 10px;
        }
        .urgent { background: #e17055; }
        .moderate { background: #fdcb6e; color: #333; }
        .low { background: #00b894; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AIê¸°ë°˜ ì¶©ìˆ˜ì—¼ ìê°€ì§„ë‹¨ ì„¤ë¬¸ì§€<br>(í•­ì†Œë‹´ì™¸ê³¼-ì†Œì•„ìš©:12ì„¸ì´í•˜)</h1>
        </div>
        
        <div class="content">
            <div class="important">
                ì´ ê²€ì‚¬ëŠ” ì°¸ê³ ìš©ìœ¼ë¡œ í™œìš©í•˜ì—¬ì•¼ í•˜ë©°, ì •í™•í•œ ì§„ë‹¨ì€ ê° ì§ˆí™˜ì— ë”°ë¥¸ ì „ë¬¸ì˜ì˜ ì§„ì°°ì´ í•„ìš”í•©ë‹ˆë‹¤.
            </div>

            <div class="section basic-info">
                <h2>ê¸°ë³¸ ì •ë³´</h2>
                <label>
                    ì„±ë³„:
                    <select id="gender">
                        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                        <option value="male">ë‚¨ì ğŸ‘¦</option>
                        <option value="female">ì—¬ì ğŸ‘§</option>
                    </select>
                </label>
                <label>
                    ë‚˜ì´: <input type="number" id="age" min="0" max="12" placeholder="ë‚˜ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"> ì„¸
                </label>
            </div>

            <div class="section tests">
                <h2>í˜ˆì•¡ê²€ì‚¬ ê²°ê³¼ (ìˆëŠ” ê²½ìš°ë§Œ)</h2>
                <label><input type="radio" name="wbc" value="none"> ê²€ì‚¬ ì•ˆí•¨</label>
                <label><input type="radio" name="wbc" value="normal"> ì •ìƒ (10,000 ë¯¸ë§Œ)</label>
                <label><input type="radio" name="wbc" value="high10"> ì•½ê°„ ë†’ìŒ (10,000~18,000)</label>
                <label><input type="radio" name="wbc" value="high18"> ë§ì´ ë†’ìŒ (18,000 ì´ìƒ)</label>
            </div>

            <div class="section symptoms">
                <h2>ì¦ìƒ ì„ íƒ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</h2>
                
                <h3>ğŸŒ¡ï¸ ì—´ê³¼ ì „ì‹ ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="fever"> ì—´ì´ ë‚¨ (38ë„ ì´ìƒ)</label>
                <label><input type="checkbox" name="symptoms" value="high_fever"> ê³ ì—´ (39ë„ ì´ìƒ)</label>
                <label><input type="checkbox" name="symptoms" value="chills"> ì˜¤í•œ (ëª¸ì´ ë–¨ë¦¼)</label>
                <label><input type="checkbox" name="symptoms" value="fatigue"> ì…ë§›ì´ ì—†ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="irritability"> ë³´ì±”/ì§œì¦ì´ ë§ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="lethargy"> ì¶• ëŠ˜ì–´ì§€ê³  ê¸°ìš´ì´ ì—†ìŒ</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_fever_systemic"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ¤¢ ì†Œí™”ê¸° ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="vomiting"> êµ¬í† </label>
                <label><input type="checkbox" name="symptoms" value="nausea"> ë©”ìŠ¤êº¼ì›€</label>
                <label><input type="checkbox" name="symptoms" value="diarrhea"> ì„¤ì‚¬</label>
                <label><input type="checkbox" name="symptoms" value="loose_stool"> ë¬´ë¥¸ ë³€</label>
                <label><input type="checkbox" name="symptoms" value="constipation"> ë³€ë¹„</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_gi_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ˜– ë³µí†µ ìœ„ì¹˜ì™€ íŠ¹ì§•</h3>
                <label><input type="checkbox" name="symptoms" value="ab_pain_periumbilical"> ë°°ê¼½ ì£¼ìœ„ í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_rlq"> ì˜¤ë¥¸ìª½ ì•„ë˜ë°° í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_generalized"> ë°° ì „ì²´ê°€ ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_upper"> ëª…ì¹˜ ë¶€ìœ„ í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="pain_migration"> í†µì¦ì´ ë°°ê¼½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™</label>
                <label><input type="checkbox" name="symptoms" value="pain_walking"> ê±¸ì„ ë•Œ ë” ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="pain_jumping"> ë›°ê±°ë‚˜ í”ë“¤ë¦´ ë•Œ ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="pain_cough"> ê¸°ì¹¨í•  ë•Œ ë°°ê°€ ì•„í””</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_abdominal_pain"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸš— íŠ¹ë³„í•œ ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="car_pain"> ì°¨ íƒ€ê³  ì˜¬ ë•Œ ìš¸í‰ë¶ˆí‰í•œ ê¸¸ì—ì„œ ì•„íŒ ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="lying_still"> ê°€ë§Œíˆ ëˆ„ì›Œì„œ ë‹¤ë¦¬ë¥¼ êµ¬ë¶€ë¦¬ê³  ìˆìŒ</label>
                <label><input type="checkbox" name="symptoms" value="avoid_movement"> ì›€ì§ì´ê¸° ì‹«ì–´í•¨</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_special_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ’§ ì†Œë³€ ê´€ë ¨ ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="dysuria"> ì†Œë³€ ë³¼ ë•Œ ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="frequency"> ì†Œë³€ì„ ìì£¼ ë´„</label>
                <label><input type="checkbox" name="symptoms" value="urgency"> ì†Œë³€ì´ ê¸‰í•¨</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_urinary_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ¤§ ê°ê¸° ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="cough"> ê¸°ì¹¨</label>
                <label><input type="checkbox" name="symptoms" value="runny_nose"> ì½§ë¬¼</label>
                <label><input type="checkbox" name="symptoms" value="sore_throat"> ëª© ì•„í””</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_cold_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ‘¶ ì˜ì•„ íŠ¹ë³„ ì¦ìƒ (3ì„¸ ë¯¸ë§Œ)</h3>
                <label><input type="checkbox" name="symptoms" value="crying_inconsolable"> ë‹¬ë˜ë„ ê³„ì† ìš°ëŠ” ì•„ì´</label>
                <label><input type="checkbox" name="symptoms" value="feeding_refusal"> ì –/ë°¥ì„ ì•ˆ ë¨¹ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="drawing_legs"> ë‹¤ë¦¬ë¥¼ ë°°ë¡œ ëŒì–´ë‹¹ê¹€</label>
                <label style="background: #f0f0f0; border: 2px dashed #999;"><input type="checkbox" name="symptoms" value="no_infant_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ (ë˜ëŠ” 3ì„¸ ì´ìƒ)</label>
            </div>

            <div class="section duration">
                <h2>ì¦ìƒì´ ì–¸ì œë¶€í„° ì‹œì‘ëë‚˜ìš”?</h2>
                <label><input type="radio" name="duration" value="6h"> 6ì‹œê°„ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="12h"> 12ì‹œê°„ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="24h"> 1ì¼ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="48h"> 2ì¼ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="72h"> 3ì¼ ì´ìƒ</label>
            </div>

            <div class="section pain">
                <h2>ì•„í”ˆ ì •ë„ë¥¼ í‘œì‹œí•´ì£¼ì„¸ìš”</h2>
                <div class="pain-slider">
                    <div class="pain-faces">
                        <span>ğŸ˜Š</span><span>ğŸ™‚</span><span>ğŸ˜</span><span>ğŸ˜Ÿ</span><span>ğŸ˜£</span><span>ğŸ˜«</span><span>ğŸ˜°</span><span>ğŸ˜­</span><span>ğŸ˜±</span><span>ğŸ’€</span>
                    </div>
                    <input type="range" id="pain_scale" name="pain_scale" min="0" max="10" value="0" class="pain-scale" 
                           oninput="document.getElementById('pain_output').innerText = this.value">
                    <div style="font-size: 24px; font-weight: bold; color: #6c5ce7;">
                        ì•„í”ˆ ì •ë„: <span id="pain_output">0</span> / 10
                    </div>
                </div>
            </div>

            <button class="submit-btn" onclick="calculateResult()">ğŸ” ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</button>

            <div class="section result" id="result_section" style="display: none;">
                <h2>ğŸ“Š ì˜ˆìƒ ì§„ë‹¨ ê²°ê³¼</h2>
                <div id="result"></div>
            </div>
        </div>
    </div>

    <script>
        function calculateResult() {
            const age = parseInt(document.getElementById('age').value) || 0;
            const gender = document.getElementById('gender').value;
            const symptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(e => e.value);
            const duration = document.querySelector('input[name="duration"]:checked')?.value || '';
            const wbc = document.querySelector('input[name="wbc"]:checked')?.value || '';
            const pain = parseInt(document.getElementById('pain_scale').value);

            let scores = {
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼': 0,
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µê°€ëŠ¥ì„±)': 0,
                'ì¥ì—¼/ìœ„ì¥ì—¼': 0,
                'ì¥ì¤‘ì²©ì¦': 0,
                'ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼': 0,
                'ìš”ë¡œê°ì—¼': 0,
                'ë³€ë¹„': 0
            };

            // ê¸‰ì„± ì¶©ìˆ˜ì—¼ ì ìˆ˜ ê³„ì‚° (Alvarado score ê¸°ë°˜ + ì†Œì•„ íŠ¹ì„± ë°˜ì˜)
            if (symptoms.includes('pain_migration')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 15; // í†µì¦ ì´ë™ì´ ê°€ì¥ ì¤‘ìš”
            if (symptoms.includes('ab_pain_rlq')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 12;
            if (symptoms.includes('ab_pain_periumbilical')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('vomiting')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('fever')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
            if (symptoms.includes('fatigue')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
            if (symptoms.includes('nausea')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 5;
            
            // ì†Œì•„ íŠ¹ë³„ ì§•í›„
            if (symptoms.includes('car_pain')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            if (symptoms.includes('lying_still')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('avoid_movement')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 7;
            if (symptoms.includes('pain_walking')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('pain_jumping')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('pain_cough')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
            
            // ì˜ì•„ íŠ¹ë³„ ì¦ìƒ
            if (age < 3) {
                if (symptoms.includes('crying_inconsolable')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
                if (symptoms.includes('feeding_refusal')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
                if (symptoms.includes('drawing_legs')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 7;
            }
            
            // ê²€ì‚¬ ê²°ê³¼
            if (wbc === 'high10') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (wbc === 'high18') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 12;
            
            // ê¸°ê°„ë³„ ê°€ì¤‘ì¹˜
            if (duration === '12h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 3;
            if (duration === '24h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 5;
            if (duration === '48h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (duration === '72h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10; // ì†Œì•„ì—ì„œ ì²œê³µ ìœ„í—˜
            
            // í†µì¦ ê°•ë„
            if (pain >= 7) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            else if (pain >= 5) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 5;
            
            // 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' ì„ íƒ ì‹œ ê°ë³„ì§„ë‹¨ì— ë°˜ì˜
            
            // ë°œì—´/ì „ì‹ ì¦ìƒì´ ì—†ìœ¼ë©´ ë°”ì´ëŸ¬ìŠ¤ì„± ì§ˆí™˜ ê°€ëŠ¥ì„± ë‚®ì¶¤
            if (symptoms.includes('no_fever_systemic')) {
                scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] -= 8;
                scores['ìš”ë¡œê°ì—¼'] -= 5;
                scores['ì¥ì—¼/ìœ„ì¥ì—¼'] -= 3;
                // ì¶©ìˆ˜ì—¼ì€ ì´ˆê¸°ì— ì—´ì´ ì—†ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í¬ê²Œ ê°ì í•˜ì§€ ì•ŠìŒ
            }
            
            // ì†Œí™”ê¸° ì¦ìƒì´ ì—†ìœ¼ë©´ ì¥ì—¼ ê°€ëŠ¥ì„± í¬ê²Œ ë‚®ì¶¤
            if (symptoms.includes('no_gi_symptoms')) {
                scores['ì¥ì—¼/ìœ„ì¥ì—¼'] -= 15;
                scores['ì¥ì¤‘ì²©ì¦'] -= 8;
                scores['ë³€ë¹„'] -= 10;
                // ì¶©ìˆ˜ì—¼ë„ ì´ˆê¸°ì—” ì†Œí™”ê¸° ì¦ìƒ ì—†ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì•½ê°„ë§Œ ê°ì 
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] -= 3;
            }
            
            // ë³µí†µì´ ì—†ìœ¼ë©´ ëŒ€ë¶€ë¶„ ì§ˆí™˜ ê°€ëŠ¥ì„± ë‚®ì¶¤
            if (symptoms.includes('no_abdominal_pain')) {
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] -= 20;
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µê°€ëŠ¥ì„±)'] -= 20;
                scores['ì¥ì—¼/ìœ„ì¥ì—¼'] -= 15;
                scores['ì¥ì¤‘ì²©ì¦'] -= 15;
                scores['ë³€ë¹„'] -= 15;
                scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] -= 10;
                // ìš”ë¡œê°ì—¼ì€ ë³µí†µ ì—†ì´ë„ ê°€ëŠ¥
            }
            
            // íŠ¹ë³„í•œ ì¦ìƒ(ì›€ì§ì„ ê´€ë ¨)ì´ ì—†ìœ¼ë©´ ì¶©ìˆ˜ì—¼ ê°€ëŠ¥ì„± ë‚®ì¶¤
            if (symptoms.includes('no_special_symptoms')) {
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] -= 8;
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µê°€ëŠ¥ì„±)'] -= 5;
            }
            
            // ì†Œë³€ ì¦ìƒì´ ì—†ìœ¼ë©´ ìš”ë¡œê°ì—¼ ê°€ëŠ¥ì„± í¬ê²Œ ë‚®ì¶¤
            if (symptoms.includes('no_urinary_symptoms')) {
                scores['ìš”ë¡œê°ì—¼'] -= 20;
            }
            
            // ê°ê¸° ì¦ìƒì´ ì—†ìœ¼ë©´ ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼ ê°€ëŠ¥ì„± ë‚®ì¶¤
            if (symptoms.includes('no_cold_symptoms')) {
                scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] -= 10;
            }
            
            // ì˜ì•„ ì¦ìƒì´ ì—†ìœ¼ë©´ (ë˜ëŠ” 3ì„¸ ì´ìƒ) ì¥ì¤‘ì²©ì¦ ê°€ëŠ¥ì„± ë‚®ì¶¤
            if (symptoms.includes('no_infant_symptoms') || age >= 3) {
                if (age >= 3) {
                    scores['ì¥ì¤‘ì²©ì¦'] -= 10; // 3ì„¸ ì´ìƒì—ì„œëŠ” ë“œë­„
                }
            }
            let perforationRisk = 0;
            if (symptoms.includes('high_fever')) perforationRisk += 3;
            if (wbc === 'high18') perforationRisk += 3;
            if (duration === '48h') perforationRisk += 2;
            if (duration === '72h') perforationRisk += 3;
            if (symptoms.includes('ab_pain_generalized')) perforationRisk += 2;
            if (symptoms.includes('chills')) perforationRisk += 2;
            if (age < 6) perforationRisk += 2;
            
            // ì¶©ìˆ˜ì—¼ ì ìˆ˜ê°€ ë†’ê³  ì²œê³µ ìœ„í—˜ì´ ìˆìœ¼ë©´ ì²œê³µì„±ìœ¼ë¡œ ë¶„ë¥˜
            if (scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] > 30 && perforationRisk >= 5) {
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µê°€ëŠ¥ì„±)'] = scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] + perforationRisk * 5;
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] = Math.max(0, scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] - 20);
            }

            // ì¥ì—¼/ìœ„ì¥ì—¼
            if (symptoms.includes('diarrhea')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 15;
            if (symptoms.includes('loose_stool')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 10;
            if (symptoms.includes('vomiting')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 8;
            if (symptoms.includes('nausea')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 6;
            if (symptoms.includes('fever')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 5;
            if (symptoms.includes('ab_pain_generalized')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 8;
            if (pain < 5) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 5;

            // ì¥ì¤‘ì²©ì¦ (ì£¼ë¡œ 2ì„¸ ë¯¸ë§Œ)
            if (age < 2) {
                if (symptoms.includes('crying_inconsolable')) scores['ì¥ì¤‘ì²©ì¦'] += 15;
                if (symptoms.includes('vomiting')) scores['ì¥ì¤‘ì²©ì¦'] += 10;
                if (symptoms.includes('drawing_legs')) scores['ì¥ì¤‘ì²©ì¦'] += 12;
                if (symptoms.includes('ab_pain_rlq')) scores['ì¥ì¤‘ì²©ì¦'] += 8;
                if (symptoms.includes('lethargy')) scores['ì¥ì¤‘ì²©ì¦'] += 8;
                if (duration === '6h' || duration === '12h') scores['ì¥ì¤‘ì²©ì¦'] += 8;
            }

            // ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼
            if (symptoms.includes('cough') || symptoms.includes('runny_nose') || symptoms.includes('sore_throat')) {
                scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] += 12;
            }
            if (symptoms.includes('fever')) scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] += 8;
            if (symptoms.includes('ab_pain_periumbilical')) scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] += 8;
            if (symptoms.includes('ab_pain_rlq')) scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] += 6;
            if (age >= 5 && age <= 12) scores['ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼'] += 5; // í˜¸ë°œ ì—°ë ¹

            // ìš”ë¡œê°ì—¼
            if (symptoms.includes('dysuria')) scores['ìš”ë¡œê°ì—¼'] += 15;
            if (symptoms.includes('frequency')) scores['ìš”ë¡œê°ì—¼'] += 10;
            if (symptoms.includes('urgency')) scores['ìš”ë¡œê°ì—¼'] += 8;
            if (symptoms.includes('fever')) scores['ìš”ë¡œê°ì—¼'] += 8;
            if (gender === 'female') scores['ìš”ë¡œê°ì—¼'] += 5; // ì—¬ì•„ì—ì„œ ë” í”í•¨

            // ë³€ë¹„
            if (symptoms.includes('constipation')) scores['ë³€ë¹„'] += 15;
            if (symptoms.includes('ab_pain_generalized')) scores['ë³€ë¹„'] += 8;
            if (symptoms.includes('ab_pain_periumbilical')) scores['ë³€ë¹„'] += 6;
            if (!symptoms.includes('fever')) scores['ë³€ë¹„'] += 5;
            if (pain < 6) scores['ë³€ë¹„'] += 5;

            // ì´í•© ê³„ì‚° ë° í¼ì„¼íŠ¸ ë³€í™˜
            const total = Math.max(Object.values(scores).reduce((a, b) => a + b, 0), 1);
            const percentages = Object.keys(scores).map(disease => {
                return [disease, Math.round((scores[disease] / total) * 100)];
            });

            // ìƒìœ„ 3ê°œ ì§ˆí™˜ ì„ íƒ
            percentages.sort((a, b) => b[1] - a[1]);
            const top3 = percentages.slice(0, 3);

            // ì§„ë£Œê³¼ ë° ê²€ì‚¬ ì¶”ì²œ
            const recommendations = {
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼': {
                    dept: 'ì™¸ê³¼ì§„ë£Œ ê¶Œìœ ',
                    tests: 'CT, ì´ˆìŒíŒŒ, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'urgent'
                },
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µê°€ëŠ¥ì„±)': {
                    dept: 'ì‘ê¸‰ì™¸ê³¼ì§„ë£Œ ì¦‰ì‹œ',
                    tests: 'CT, í˜ˆì•¡ê²€ì‚¬, ì‘ê¸‰ìˆ˜ìˆ  ì¤€ë¹„',
                    urgency: 'urgent'
                },
                'ì¥ì—¼/ìœ„ì¥ì—¼': {
                    dept: 'ì†Œì•„ê³¼ ì§„ë£Œ',
                    tests: 'ëŒ€ë³€ê²€ì‚¬, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'moderate'
                },
                'ì¥ì¤‘ì²©ì¦': {
                    dept: 'ì†Œì•„ì™¸ê³¼ ì‘ê¸‰ì§„ë£Œ',
                    tests: 'ì´ˆìŒíŒŒ, X-ray',
                    urgency: 'urgent'
                },
                'ì¥ê°„ë§‰ ë¦¼í”„ì ˆì—¼': {
                    dept: 'ì†Œì•„ê³¼ ì§„ë£Œ',
                    tests: 'í˜ˆì•¡ê²€ì‚¬, ì´ˆìŒíŒŒ',
                    urgency: 'low'
                },
                'ìš”ë¡œê°ì—¼': {
                    dept: 'ì†Œì•„ê³¼ ì§„ë£Œ',
                    tests: 'ì†Œë³€ê²€ì‚¬, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'moderate'
                },
                'ë³€ë¹„': {
                    dept: 'ì†Œì•„ê³¼ ì§„ë£Œ',
                    tests: 'X-ray (í•„ìš”ì‹œ)',
                    urgency: 'low'
                }
            };

            // ì‘ê¸‰ ìƒí™© ì²´í¬
            let isHighRisk = false;
            let riskFactors = [];
            
            if (age < 6 && (duration === '48h' || duration === '72h')) {
                isHighRisk = true;
                riskFactors.push('6ì„¸ ë¯¸ë§Œì—ì„œ 48ì‹œê°„ ì´ìƒ ì¦ìƒ ì§€ì†');
            }
            if (symptoms.includes('high_fever') && (symptoms.includes('ab_pain_rlq') || symptoms.includes('pain_migration'))) {
                isHighRisk = true;
                riskFactors.push('ê³ ì—´ê³¼ ì „í˜•ì  ì¶©ìˆ˜ì—¼ ì¦ìƒ');
            }
            if (wbc === 'high18' && scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µê°€ëŠ¥ì„±)'] > 0) {
                isHighRisk = true;
                riskFactors.push('ë°±í˜ˆêµ¬ ìˆ˜ì¹˜ 18,000 ì´ìƒìœ¼ë¡œ ì²œê³µ ì˜ì‹¬');
            }
            if (pain >= 8 && symptoms.includes('avoid_movement')) {
                isHighRisk = true;
                riskFactors.push('ì‹¬í•œ í†µì¦ê³¼ ì›€ì§ì„ ê¸°í”¼');
            }
            if (wbc === 'high18') {
                isHighRisk = true;
                riskFactors.push('ë°±í˜ˆêµ¬ ìˆ˜ì¹˜ í˜„ì €íˆ ë†’ìŒ');
            }

            // ê²°ê³¼ ì¶œë ¥
            let resultHTML = '';
            
            if (isHighRisk) {
                resultHTML += `<div class="high-risk">
                    ğŸš¨ <strong>ì‘ê¸‰ìƒí™© ì˜ì‹¬!</strong><br>
                    ì¦‰ì‹œ ì‘ê¸‰ì‹¤ ë‚´ì›ì„ ê¶Œí•©ë‹ˆë‹¤.<br>
                    ìœ„í—˜ìš”ì¸: ${riskFactors.join(', ')}
                </div>`;
            }

            top3.forEach((item, index) => {
                const [disease, percentage] = item;
                const rec = recommendations[disease];
                const urgencyClass = rec.urgency;
                const urgencyText = urgencyClass === 'urgent' ? 'ì‘ê¸‰' : 
                                  urgencyClass === 'moderate' ? 'ë³´í†µ' : 'ë‚®ìŒ';
                
                resultHTML += `
                    <div class="diagnosis-item diagnosis-${index + 1}">
                        <strong>${index + 1}. ${disease}: ${percentage}%</strong>
                        <span class="urgency-indicator ${urgencyClass}">${urgencyText}</span>
                        <br>
                        ğŸ‘¨â€âš•ï¸ ê¶Œì¥ ì§„ë£Œê³¼: ${rec.dept}<br>
                        ğŸ”¬ ê¶Œì¥ ê²€ì‚¬: ${rec.tests}
                    </div>
                `;
            });

            resultHTML += `
                <div style="margin-top: 20px; padding: 15px; background: #e8f4fd; border-radius: 10px;">
                    <h3>âš ï¸ ì¤‘ìš”í•œ ì•ˆë‚´ì‚¬í•­</h3>
                    <ul style="text-align: left;">
                        <li>ì´ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, <strong>ë°˜ë“œì‹œ ì˜ì‚¬ì˜ ì§„ì°°</strong>ì„ ë°›ìœ¼ì„¸ìš”.</li>
                        <li>ì†Œì•„ëŠ” ì¦ìƒì´ ë¹ ë¥´ê²Œ ë³€í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ <strong>ì§€ì†ì ì¸ ê´€ì°°</strong>ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
                        <li>ì¦ìƒì´ ì•…í™”ë˜ê±°ë‚˜ ìƒˆë¡œìš´ ì¦ìƒì´ ë‚˜íƒ€ë‚˜ë©´ <strong>ì¦‰ì‹œ ë³‘ì›</strong>ì— ê°€ì„¸ìš”.</li>
                        <li>6ì„¸ ë¯¸ë§Œ ì•„ì´ëŠ” 48ì‹œê°„ ì´ìƒ ë³µí†µì´ ì§€ì†ë˜ë©´ <strong>ì‘ê¸‰ì‹¤</strong>ë¡œ ê°€ì„¸ìš”.</li>
                    </ul>
                </div>
            `;

            document.getElementById('result').innerHTML = resultHTML;
            document.getElementById('result_section').style.display = 'block';
            document.getElementById('result_section').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>